---
title: Comparisson Between a Trained Model With Parsimonius Data and EHR Data (Such
  as MIMIC-III)
output: pdf_document
---

## Connect to PostgreSQL MIMIC-III Database

```{r echo=T}
library(DBI)

connection = dbConnect(
  odbc::odbc(),
  Driver   = 'PostgreSQL Unicode',
  Server   = 'mimic-server.postgres.database.azure.com',
  Database = 'mimic',
  schema   = 'omop',
  UID      = 'postgres',
  PWD      = 'securepass321.',
  Port     = 5432,
  sslmode  = 'require'
)

dbListTables(connection, schema='omop')
```

## Define Cohorts

```{r echo=T, results='hide'}
library(dplyr)
library(dbplyr)

tbl(connection, in_schema('omop', 'drug_exposure')) %>%
  head()
```
```{r echo=T}
library(Eunomia)

createCohorts(
  connection,
  cdmDatabaseSchema = "omop",
  cohortDatabaseSchema = "omop",
  cohortTable = "cohort"
)
```


```{r echo=T}
library(DBI)

connection = dbConnect(
  odbc::odbc(),
  Driver   = 'PostgreSQL Unicode',
  Server   = 'mimic-server.postgres.database.azure.com',
  Database = 'mimic',
  UID      = 'postgres',
  PWD      = 'securepass321.',
  Port     = 5432,
  sslmode  = 'require'
)



dbListTables(connection)
```
